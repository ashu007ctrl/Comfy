================================================================================
                    AI STRESS DETECTION APPLICATION — "COMFY"
================================================================================

PROJECT OVERVIEW
----------------
Comfy is a full-stack AI-powered stress detection web application that analyzes
user responses through a dynamically generated, personalized questionnaire and
provides tailored stress management recommendations. The app uses Google's
Gemini 2.5 Flash AI model to generate context-aware assessment questions based
on the user's profile and then analyzes their responses to deliver actionable
insights and tips.


LATEST TECH STACK (2026)
------------------------

Frontend:
  - React v19.2            — Component-based UI with hooks and Suspense
  - Vite v7.2              — Lightning-fast build tool with HMR
  - Framer Motion v12.23   — Production-grade animations and page transitions
  - Axios v1.13            — Promise-based HTTP client
  - Lucide React v0.556    — Modern SVG icon library
  - React Helmet Async v2  — Dynamic meta tag management for SEO
  - clsx + tailwind-merge  — Conditional class utilities
  - CSS3                   — Custom styling (gradients, glassmorphism, animations)

Backend:
  - Node.js v22+           — JavaScript runtime (LTS)
  - Express.js v5          — Next-gen web framework (async error handling)
  - Mongoose v9            — MongoDB ODM with modern schema features
  - Google Generative AI   — @google/generative-ai SDK (Gemini 2.5 Flash)
  - Helmet v8              — HTTP security headers
  - Morgan v1.10           — HTTP request logger
  - express-rate-limit v8  — API rate limiting middleware
  - Joi v18               — Request validation library
  - dotenv v17             — Environment variable management
  - CORS v2.8              — Cross-origin resource sharing

Database:
  - MongoDB (Atlas or Local) — NoSQL document database for assessment history
  - Graceful degradation    — App runs without DB (history disabled)

AI Model:
  - Google Gemini 2.5 Flash — Latest generative AI model
  - Retry with exponential backoff for rate-limit handling
  - Intelligent fallback system when AI is unavailable

APIs & Services:
  - Google Gemini API       — AI question generation + stress analysis
  - Web3Forms API           — Contact form email handling


BACKEND ARCHITECTURE (MVC)
--------------------------

The server follows a clean MVC (Model-View-Controller) pattern:

  /server
    server.js                       — Application entry point, middleware setup
    /config
      db.js                         — MongoDB connection with graceful fallback
    /models
      Assessment.js                 — Mongoose schema (userInfo, questions, score,
                                      level, analysis, personalizedTips)
    /controllers
      assessmentController.js       — Request handlers (generateQuestions,
                                      analyzeStress, getHistory)
    /services
      aiService.js                  — Gemini AI integration, prompt engineering,
                                      retry logic, fallback questions
    /routes
      assessmentRoutes.js           — Express router (3 endpoints)
    .env                            — Environment variables (API keys, DB URI)

Middleware Stack:
  1. CORS           — Cross-origin requests (open for dev, restrictable for prod)
  2. Helmet         — Security headers (XSS, MIME sniffing, etc.)
  3. Morgan         — Request logging (dev format)
  4. express.json() — JSON body parsing
  5. Rate Limiter   — 100 requests per 15 minutes per IP


API ENDPOINTS
-------------

POST /api/generate-questions
  Request:  { userInfo: { age, gender, occupation, mood } }
  Response: { questions: [{ id, cluster, text, minLabel, maxLabel }] }
  Details:  AI generates 7 personalized questions based on user profile.
            Falls back to curated question pool if AI is unavailable.

POST /api/analyze-stress
  Request:  { userInfo, answers: { questionId: value }, questions }
  Response: {
    score: number (0-100),
    level: "Low" | "Moderate" | "High",
    analysis: { summary, keyStressors[], stressLevelExplanation },
    personalizedTips: [{ title, description }],
    disclaimer: string
  }
  Details:  Calculates score locally, then gets AI-powered personalized analysis.
            Falls back to curated tips if AI fails. Saves results to MongoDB.

GET /api/history
  Response: Array of past assessments (latest 10, sorted by date)
  Details:  Returns empty array if database is not connected.

GET /ping
  Response: { status: "Active", timestamp }
  Details:  Health check endpoint. Frontend pings every 5 minutes to prevent
            backend sleep on free-tier hosting (Render).


FRONTEND ARCHITECTURE
---------------------

  /client
    /src
      App.jsx                       — Main app logic, page routing, API calls
      main.jsx                      — React DOM entry point
      index.css                     — Global styles and design tokens
      /pages
        Home.jsx                    — Landing page (Hero, About, Contact, Footer)
      /components
        Header.jsx                  — Adaptive header (transparent/dark/light)
        BasicInfoForm.jsx           — User profile collection form
        Questionnaire.jsx           — Dynamic question flow with animations
        Results.jsx                 — Score gauge, analysis, tips display
        History.jsx                 — Past assessment records (lazy loaded)
      /assets                       — Images and static files
    /public
      robots.txt                    — Search engine crawling rules
      sitemap.xml                   — XML sitemap for SEO indexing

Page Flow States:
  home → basic-info → loading-questions → test → loading → result
                                                          → history


KEY FEATURES
------------

1. AI-POWERED DYNAMIC QUESTIONS
   - Questions generated in real-time by Gemini 2.5 Flash
   - Personalized to user's age, gender, occupation, and current mood
   - Grouped into stress clusters (Work, Emotional, Physical, Social)
   - 1-5 Likert scale with empathetic, conversational phrasing
   - Intelligent fallback to curated questions on AI failure

2. PERSONALIZED STRESS ANALYSIS
   - Local score calculation (0-100) from question responses
   - AI interprets score in context of user's specific occupation
   - Identifies key stressors from high-scoring answers
   - Generates 5 actionable, role-specific tips (not generic advice)
   - Fallback analysis with randomized curated tips

3. ASSESSMENT HISTORY
   - Results persisted to MongoDB after each assessment
   - History page shows last 10 assessments with scores and dates
   - Lazy-loaded with React Suspense for performance
   - Gracefully handles missing database connection

4. PROFESSIONAL UI/UX
   - Dark theme with purple/indigo gradient palette
   - Glassmorphic design elements with backdrop blur
   - Framer Motion animations throughout (page transitions, reveals)
   - Floating background blobs with blur effects
   - SVG gauge visualization for stress score
   - Micro-interactions (hover, press, focus states)
   - Fully responsive (Mobile, Tablet, Desktop)

5. ADAPTIVE HEADER
   - Fixed position with backdrop blur
   - Theme adapts per page (transparent on home, dark on dark pages)
   - Dynamic navigation links based on current page context
   - Scroll-triggered style changes
   - Mobile-optimized hamburger menu

6. HERO SECTION
   - Animated badge with pulsing activity indicator
   - Gradient text effects
   - Dual CTA buttons (Primary + Secondary)
   - Statistics display (Users, Accuracy, Test Time)
   - Floating meditation image
   - Animated scroll-down indicator

7. CONTACT FORM
   - Web3Forms integration for serverless email handling
   - Animated input fields with focus states
   - Form validation with error feedback
   - Success/error states with animations

8. KEEP-ALIVE SYSTEM
   - Frontend pings /ping endpoint every 5 minutes
   - Prevents free-tier hosting (Render) from sleeping
   - Immediate ping on app load for fast first response


RESILIENCE & ERROR HANDLING
---------------------------

- AI Unavailable:   Falls back to curated question pool + randomized tips
- Rate Limited:     Exponential backoff retry (up to 3 attempts with jitter)
- Database Down:    App continues in non-persistent mode (no history saved)
- API Errors:       User-friendly error banner with retry guidance
- 404 Routes:       JSON error response from backend
- Global Handler:   Catches all unhandled server errors gracefully


SECURITY FEATURES
-----------------

- Helmet v8 for comprehensive HTTP security headers
- Rate limiting (100 requests / 15 min per IP)
- API keys stored in .env (never exposed to client)
- CORS configuration (restrictable per environment)
- Input validation with Joi
- No sensitive data stored client-side
- HTTPS recommended for production


SEO OPTIMIZATION
----------------

- React Helmet Async for dynamic per-page meta tags
- Open Graph protocol tags for social media sharing
- Twitter Card integration for rich link previews
- JSON-LD structured data (WebApplication + Organization)
- Canonical URLs to prevent duplicate content issues
- robots.txt for crawler guidance
- XML sitemap for search engine indexing
- Semantic HTML5 structure with proper heading hierarchy
- Page-specific titles:
    Home:          "Comfy - AI-Powered Stress Detection & Mental Wellness"
    Questionnaire: "Free Stress Assessment Test - Comfy"
    Results:       "Your Stress Analysis Results - Comfy"


DESIGN SYSTEM
-------------

Color Palette:
  Primary:    Purple #7c3aed → Indigo #4c1d95
  Accent:     Cyan #06b6d4
  Background: Dark gradient (Indigo → Purple → Violet)
  Text:       White with varying opacity

Animations (Framer Motion):
  - Entrance: fade + slide with stagger
  - Hover: scale, lift, glow effects
  - Pages: directional slide transitions
  - Progress: spring physics
  - Scroll: intersection-triggered reveals
  - Micro: button press, form focus, gradient shifts

Responsive Breakpoints:
  - Mobile:  < 480px
  - Tablet:  480px - 768px
  - Desktop: 768px - 1024px
  - Wide:    > 1024px


HOW TO RUN
----------

Prerequisites:
  - Node.js v22+ installed
  - MongoDB (local or Atlas URI) — optional, app works without it

1. Clone the repository

2. Backend Setup:
   cd server
   npm install
   # Create .env file with:
   #   GEMINI_API_KEY=your_api_key_here
   #   MONGO_URI=your_mongodb_uri (optional)
   node server.js
   → Server runs on http://localhost:3000

3. Frontend Setup:
   cd client
   npm install
   npm run dev
   → App runs on http://localhost:5173

4. Open http://localhost:5173 in your browser


DEPLOYMENT
----------

Environment Variables Required:
  Backend:
    - GEMINI_API_KEY (Google AI Studio)
    - MONGO_URI (MongoDB Atlas connection string)
    - PORT (optional, defaults to 3000)
  Frontend:
    - VITE_API_URL (deployed backend URL)

Build Commands:
  Frontend: npm run build → generates /dist folder
  Backend:  Direct Node.js deployment (no build step)

Hosting Options:
  Frontend: Netlify, Vercel, GitHub Pages
  Backend:  Render, Railway, Fly.io, AWS
  Database: MongoDB Atlas (free tier available)


DEVELOPMENT TIMELINE
--------------------

Phase 1:  Project Setup & Core Structure
Phase 2:  UI Components (Header, Hero, About, Contact, Footer)
Phase 3:  Basic Info Form + Dynamic Question Generation
Phase 4:  Backend MVC Architecture + Gemini 2.5 Flash Integration
Phase 5:  AI Stress Analysis + Fallback Systems
Phase 6:  Results Page with SVG Gauge Visualization
Phase 7:  Assessment History with MongoDB Persistence
Phase 8:  Animations, Polish & Micro-interactions
Phase 9:  Mobile Optimization & Responsive Design
Phase 10: SEO, Meta Tags, Structured Data & Social Media
Phase 11: Security Hardening (Helmet, Rate Limiting, Validation)
Phase 12: Keep-Alive System & Deployment Optimization


FUTURE ENHANCEMENTS
-------------------

- User authentication (save history per user)
- Multiple language support (Hindi, Spanish, etc.)
- Export results as PDF report
- Trend analysis and progress tracking over time
- Integration with health tracking apps
- Progressive Web App (PWA) capabilities
- Email notifications with assessment results
- Admin dashboard for usage analytics
- Dark/Light theme toggle


CREDITS
-------

Developer:        [Your Name]
AI Model:         Google Gemini 2.5 Flash
Icons:            Lucide React
Animation:        Framer Motion
Contact Service:  Web3Forms
Database:         MongoDB


LICENSE
-------

[Add your license information here]


CONTACT
-------

For questions or collaboration:
[Add your contact information]

================================================================================
                              END OF DOCUMENTATION
================================================================================
